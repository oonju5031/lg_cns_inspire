<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button type="button" id="btn">click</button>
    <div>
        <ul id="list"></ul>
    </div>
    <script>
        /*
        Promise(resolve, reject)
        - 비동기 작업의 처리를 도와주는 객체()
        - resolve : 작업이 성공했을 때
        - reject  : 작업이 실패했을 때
        Promise 기반으로 통신 : fetch() , axios() 
        */
        // const promise = new Promise((resolve, reject) => {
        //     setTimeout( () => {
        //         // resolve({name: 'jslim' , camp : 'am inspire lgncs'}); 
        //         reject('error')
        //     } , 5000) ; 

        // });
        // promise.then( response => {
        //     console.log(`>>> then response : ${response.name} - ${response.camp}`);
        // });
        // promise.catch( err => {
        //     console.log(`>>> catch err : ${err}`); 
        // });

        const getData = () => {
            return new Promise((resolve, reject) => {
                setTimeout( () => {
                    const status = 200 ; 
                    if(status == 200) {
                        resolve({name: 'jslim' , camp : 'am inspire lgncs'}); 
                    }else {
                        reject('error')
                    }
                } , 1000) ; 

            });
        }
        document.querySelector('#btn').onclick = async (e) => {
            try{
                // Promise
                // const response = await getData() ; 
                // console.log(`>>> response : ${response.name} - ${response.camp}`);

                // fetch api 
                // const response = await fetch('../server/todos.json');
                // console.log(">>> response : " , response) ;  
                // const jsonData = await response.json();
                // console.log(">>> response : " , jsonData) ;  

                const response = await fetch('https://fakestoreapi.com/products');
                const jsonData = await response.json();

                let result = '';
                jsonData.forEach( (data, idx) => {
                    result += `<li>${data.title} - ${data.price}</li>` ;
                }) ;
                document.querySelector('#list').innerHTML = result ;

            } catch(err) {
                console.log(`>>> err : ${err}`); 
            }
        }
    </script>
</body>
</html>